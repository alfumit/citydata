<html ng-app="mcda">
    <head>
        <title>Moscow City Data Aggregator</title>
    </head>
    <body>
        <h2>LA LA LAnd</h2>
        <info-card></info-card>
<!--
        <div ng-repeat="cardInfo in cardsData">
            <info-card card-title="cardInfo.cardTitle" street-info="cardInfo.streetInfo" accidents="cardInfo.accidents">
        </div>
-->
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js"></script>
		<script>
            "use strict;"
        var cardsData = 
            [{
                cardTitle: "City Center",
                streetInfo: "Tverskaya",
                accidents: 10
            },
            {
                cardTitle: "UZAO",
                streetInfo: "Teply Stan",
                accidents: "1"
            },
            {
                 cardTitle: "SZAO",
                 streetInfo: "Leningradskoe schosse",
                 accidents: "100"
            }];
        angular.module("mcda",[])
        .component("infoCard",{
            bindings: {
                cardTitle: "@",
                streetInfo: "@",
                accidents: "@"
            },
            template: `
{{$ctrl.data}}
            <div class="info-card">
                <h2>{{$ctrl.cardTitle}}</h2>
                <div>
                    <h3>Details on street {{$ctrl.streetInfo}}</h3>
                    <p>Overall acceidents this month {{$ctrl.accidents}}</p>
                </div>
            </div>
            `,
            controller: function($http) {
                $http.get("/db").then((response)=>{
                    this.data = response.data;
                })
            }
        })
        </script>
    </body>
</html>